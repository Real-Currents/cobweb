<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE X3D PUBLIC "ISO//Web3D//DTD X3D 3.3//EN" "http://www.web3d.org/specifications/x3d-3.3.dtd">
<X3D profile='Full' version='3.3' xmlns:xsd='http://www.w3.org/2001/XMLSchema-instance' xsd:noNamespaceSchemaLocation='http://www.web3d.org/specifications/x3d-3.3.xsd'>
  <head>
    <meta name='comment' content='World of Titania'/>
    <meta name='created' content='Sat, 19 Dec 2015 09:16:40 GMT'/>
    <meta name='creator' content='Holger Seelig'/>
    <meta name='generator' content='Titania V1.2.1, http://titania.create3000.de'/>
    <meta name='modified' content='Sat, 19 Dec 2015 17:12:24 GMT'/>
  </head>
  <Scene>
    <WorldInfo>
      <MetadataSet DEF='Titania'
          name='Titania'
          reference='http://titania.create3000.de'>
        <MetadataSet DEF='NavigationInfo' containerField='value'
            name='NavigationInfo'
            reference='http://titania.create3000.de'>
          <MetadataString DEF='type' containerField='value'
              name='type'
              reference='http://titania.create3000.de'
              value='"NONE"'/>
        </MetadataSet>
        <MetadataSet DEF='Viewpoint' containerField='value'
            name='Viewpoint'
            reference='http://titania.create3000.de'>
          <MetadataDouble DEF='position' containerField='value'
              name='position'
              reference='http://titania.create3000.de'
              value='4.67802000045776, 5.38116979598999, 14.5215997695923'/>
          <MetadataDouble DEF='orientation' containerField='value'
              name='orientation'
              reference='http://titania.create3000.de'
              value='0, 0, 1, 0'/>
          <MetadataDouble DEF='centerOfRotation' containerField='value'
              name='centerOfRotation'
              reference='http://titania.create3000.de'
              value='4.67802000045776, 5.38116979598999, -9.53673975345737e-07'/>
        </MetadataSet>
      </MetadataSet>
    </WorldInfo>
    <LayerSet
        activeLayer='1'
        order='1, 2'>
      <Layer>
        <Background DEF='Gray'
            skyColor='0.2 0.2 0.2'/>
        <Viewpoint
            description='Initial View'
            position='4.67802 5.38117 14.5216'
            centerOfRotation='4.67802 5.38117 -9.53674e-07'/>
        <Transform DEF='PointSet'
            translation='-5.56507 -0.0667507 0'
            scale='20.2666 11.168 10.218'>
          <Shape>
            <Appearance>
              <LineProperties DEF='_1'
                  linewidthScaleFactor='20.5465'/>
              <Material
                  emissiveColor='1 0 0'/>
            </Appearance>
            <PointSet>
              <ColorRGBA DEF='_2'
                  color='0.601164 0.428434 0.15715 0.000300452, 0.116466 0.701939 0.838598 0.274819, 0.694327 0.343413 0.00542069 0.0616341, 0.642341 0.66826 0.810448 0.999589, 0.460016 0.248333 0.439506 0.277609, 0.972951 0.0491278 0.532704 0.0488597, 0.643356 0.463874 0.555691 0.00487686, 0.812948 0.617423 0.419117 0.369591, 0.193233 0.910654 0.774566 0.168298, 0.197268 0.583789 0.928539 0.555744, 0.0236438 0.919809 0.358085 0.028843, 0.309369 0.0216371 0.512383 0.640795, 0.699674 0.172798 0.308106 0.621689, 0.610076 0.0342749 0.321488 0.702403, 0.534151 0.102927 0.729654 0.649631, 0.46863 0.331116 0.125237 0.125369, 0.859361 0.814702 0.223557 0.668694, 0.12528 0.33795 0.486597 0.905213, 0.485247 0.0195216 0.823313 0.673353, 0.921164 0.64299 0.796334 0.629517, 0.571385 0.647351 0.410025 0.677978, 0.306436 0.475941 0.29795 0.747856, 0.324549 0.673885 0.426863 0.599193, 0.181552 0.0315752 0.731972 0.433513, 0.0870303 0.301371 0.0710392 0.670545, 0.639289 0.782319 0.694069 0.751295, 0.502929 0.948609 0.966422 0.76641, 0.156566 0.476113 0.235984 0.975655, 0.540478 0.541811 0.613875 0.376323, 0.73528 0.2863 0.641655 0.751976, 0.207995 0.352867 0.679114 0.553903, 0.410351 0.569581 0.682916 0.361223, 0.829418 0.105199 0.409307 0.966348, 0.93086 0.896057 2.58796e-05 0.634329, 0.742418 0.259774 0.169841 0.190916, 0.276586 0.442157 0.561818 0.0675526, 0.247921 0.304974 0.261624 0.644143, 0.997473 0.482742 0.4386 0.413676, 0.574439 0.503908 0.816997 0.987484, 0.157487 0.582947 0.367997 0.466302, 0.523917 0.901379 0.678752 0.529877, 0.927024 0.173314 0.809755 0.915636, 0.3379 0.460103 0.74197 0.0432073, 0.599467 0.493554 0.370077 0.0340179, 0.163612 0.981916 0.282336 0.520908, 0.00770223 0.410748 0.629421 0.54812, 0.309137 0.974585 0.30726 0.74296, 0.985325 0.357089 0.529704 0.372081, 0.255197 0.848454 0.947616 0.0622948, 0.654991 0.590248 0.567739 0.912008, 0.138091 0.769576 0.35807 0.59811, 0.932787 0.156224 0.101246 0.40714, 0.134196 0.15708 0.512942 0.0108832, 0.712704 0.330035 0.102137 0.246609, 0.860974 0.19242 0.672216 0.241858, 0.73925 0.923867 0.688831 0.393117, 0.562784 0.806793 0.148782 0.0265436, 0.188902 0.68531 0.735165 0.955984, 0.471828 0.430366 0.333179 0.637281, 0.462585 0.0600627 0.788064 0.585881, 0.325425 0.323136 0.726044 0.17417, 0.641528 0.863993 0.429426 0.712243, 0.580331 0.562068 0.991176 0.806681, 0.477812 0.898714 0.0897644 0.711681, 0.393183 0.732846 0.773587 0.670022, 0.678602 0.25282 0.161963 0.881897, 0.933192 0.0669142 0.227061 0.640825, 0.599527 0.957707 0.0730778 0.600446, 0.0590332 0.175636 0.86474 0.956015, 0.28783 0.812398 0.750427 0.271363, 0.826469 0.663281 0.483918 0.596675, 0.109899 0.556047 0.665293 0.605018, 0.696528 0.749183 0.522675 0.535539, 0.960452 0.149819 0.353379 0.437716, 0.686169 0.596786 0.281189 0.3422, 0.282093 0.731587 0.995718 0.677444, 0.0441582 0.333436 0.984497 0.254413, 0.824196 0.827405 0.297078 0.0607806, 0.344458 0.749662 0.676176 0.656866, 0.238952 0.642955 0.520954 0.223394, 0.167757 0.390314 0.41387 0.960554, 0.250165 0.716207 0.131075 0.122658, 0.788838 0.192315 0.187758 0.146394, 0.236803 0.889257 0.04891 0.105819, 0.503283 0.984911 0.40204 0.725978, 0.648503 0.452825 0.0649864 0.89078, 0.411627 0.0481921 0.647177 0.580383, 0.714198 0.431171 0.438908 0.418925, 0.632331 0.524287 0.847093 0.0646913, 0.417688 0.30816 0.188764 0.950584, 0.0370876 0.793021 0.690727 0.911392, 0.69547 0.0470044 0.00521318 0.903572, 0.692717 0.959942 0.551283 0.830107, 0.262299 0.0266836 0.128825 0.783907, 0.25355 0.359541 0.859195 0.284067, 0.38892 0.507325 0.901345 0.125182, 0.576471 0.450072 0.1263 0.725542, 0.344092 0.444824 0.0423729 0.639182, 0.82787 0.668809 0.518895 0.592922, 0.0694891 0.901747 0.0124966 0.785255'/>
              <Coordinate DEF='_3'
                  point='0.764975 0 0, 0.522639 0 0, 0.902333 0 0, 0.671777 0 0, 0.628017 0 0, 0.527493 0 0, 0.594293 0 0, 0.732097 0 0, 0.701015 0 0, 0.56199 0 0, 0.862153 0 0, 0.292674 0 0, 0.838457 0 0, 0.933331 0 0, 0.496341 0 0, 0.349774 0 0, 0.787617 0 0, 0.58846 0 0, 0.648068 0 0, 0.476982 0 0, 0.884878 0 0, 0.3079 0 0, 0.963789 0 0, 0.612942 0 0, 0.416414 0 0, 0.703598 0 0, 0.366447 0 0, 0.791771 0 0, 0.420592 0 0, 0.110634 0 0, 0.885859 0 0, 0.531022 0 0, 0.959421 0 0, 0.712631 0 0, 0.190576 0 0, 0.842004 0 0, 0.136407 0 0, 0.490712 0 0, 0.723561 0 0, 0.0773398 0 0, 0.388144 0 0, 0.835852 0 0, 0.594033 0 0, 0.0805687 0 0, 0.826999 0 0, 0.914463 0 0, 0.627825 0 0, 0.352671 0 0, 0.662219 0 0, 0.127052 0 0, 0.228582 0 0, 0.200333 0 0, 0.97682 0 0, 0.249813 0 0, 0.952168 0 0, 0.080812 0 0, 0.387587 0 0, 0.0989728 0 0, 0.946604 0 0, 0.608237 0 0, 0.36554 0 0, 0.807756 0 0, 0.659891 0 0, 0.936191 0 0, 0.244199 0 0, 0.0557994 0 0, 0.468062 0 0, 0.481417 0 0, 0.19301 0 0, 0.840861 0 0, 0.125802 0 0, 0.203501 0 0, 0.683247 0 0, 0.632679 0 0, 0.191989 0 0, 0.905356 0 0, 0.223768 0 0, 0.998805 0 0, 0.83248 0 0, 0.269373 0 0, 0.393934 0 0, 0.0422732 0 0, 0.652517 0 0, 0.594067 0 0, 0.451068 0 0, 0.24094 0 0, 0.461061 0 0, 0.446071 0 0, 0.0397695 0 0, 0.52834 0 0, 0.119429 0 0, 0.692313 0 0, 0.780446 0 0, 0.705896 0 0, 0.876558 0 0, 0.627228 0 0, 0.7644 0 0, 0.526347 0 0, 0.843248 0 0, 0.159848 0 0'/>
            </PointSet>
          </Shape>
        </Transform>
        <TimeSensor DEF='_4'
            loop='true'/>
        <Script DEF='BubblesScript'>
          <field accessType='inputOnly' type='SFTime' name='set_time'/>
          <field accessType='inputOutput' type='SFInt32' name='numParticles' value='100'/>
          <field accessType='initializeOnly' type='SFNode' name='color'>
            <ColorRGBA USE='_2'/>
          </field>
          <field accessType='initializeOnly' type='SFNode' name='coord'>
            <Coordinate USE='_3'/>
          </field>
<![CDATA[ecmascript:

var velocity     = new MFFloat ();
var acceleration = new MFFloat ();

function initialize ()
{
	set_numParticles ();
}

function set_numParticles ()
{
	velocity     .length = numParticles;
	acceleration .length = numParticles;
	color .color .length = numParticles;
	coord .point .length = numParticles;

	for (var i = 0; i < numParticles; ++ i)
		set_particle (i);
}

function set_particle (i)
{
	velocity [i]     = 0;
	acceleration [i] = Math .random ();

	color .color [i] = new SFColorRGBA (Math .random (),
	                                    Math .random (),
	                                    Math .random (),
	                                    Math .random ());
	                                    
	coord .point [i] .x = Math .random ();
	coord .point [i] .y = 0;
}

function set_time ()
{
	var dt = 1 / Browser .currentFrameRate;
	
	for (var i = 0; i < numParticles; ++ i)
	{
		var dv = acceleration [i] * dt;
	
		velocity [i] += dv;
	
		coord .point [i] .y += velocity [i] * dt;
		
		if (coord .point [i] .y > 1)
			set_particle (i);
	}
}]]> 
        </Script>
      </Layer>
      <Layer>
        <MetadataSet DEF='Titania_1'
            name='Titania'
            reference='http://titania.create3000.de'>
          <MetadataSet DEF='Grid' containerField='value'
              name='Grid'
              reference='http://titania.create3000.de'>
            <MetadataBoolean containerField='value'
                name='enabled'
                reference='http://titania.create3000.de'
                value='true'/>
            <MetadataFloat containerField='value'
                name='rotation'
                reference='http://titania.create3000.de'
                value='1, 0, 0, 1.5708'/>
            <MetadataFloat containerField='value'
                name='scale'
                reference='http://titania.create3000.de'
                value='0.049, 0.049, 0.049'/>
            <MetadataInteger containerField='value'
                name='dimension'
                reference='http://titania.create3000.de'
                value='73, 10, 41'/>
            <MetadataInteger containerField='value'
                name='majorLineEvery'
                reference='http://titania.create3000.de'
                value='5, 5, 5, 5, 0, 5'/>
            <MetadataInteger containerField='value'
                name='majorLineOffset'
                reference='http://titania.create3000.de'
                value='0, 0, -5, -1, 0, -6'/>
            <MetadataFloat containerField='value'
                name='lineColor'
                reference='http://titania.create3000.de'
                value='1, 0.7, 0.7, 0.0588235'/>
          </MetadataSet>
          <MetadataSet DEF='AngleGrid' containerField='value'
              name='AngleGrid'
              reference='http://titania.create3000.de'>
            <MetadataBoolean containerField='value'
                name='enabled'
                reference='http://titania.create3000.de'
                value='false'/>
          </MetadataSet>
        </MetadataSet>
        <OrthoViewpoint/>
        <Transform DEF='Header'
            translation='-1.6905 0.955504 -1'
            scale='0.0672307 0.0672307 0.0672307'>
          <Shape>
            <Appearance>
              <Material/>
            </Appearance>
            <Text
                string='"Smarty Bubbles"'
                solid='true'>
              <FontStyle
                  family='"Ubuntu", "SANS"'
                  size='1.61'
                  justify='"BEGIN", "BEGIN"'/>
            </Text>
          </Shape>
        </Transform>
        <Group DEF='BubblesMenu'>
          <Transform DEF='Header_1'
              translation='1.6905 -0.759496 -1'
              scale='0.0672307 0.0672307 0.0672307'>
            <Shape>
              <Appearance>
                <Material DEF='Artdeco31'
                    ambientIntensity='0'
                    diffuseColor='0 0 0'
                    shininess='0'/>
              </Appearance>
              <Text
                  string='"Bubbles"'
                  solid='true'>
                <FontStyle
                    family='"Ubuntu", "SANS"'
                    style='BOLD'
                    size='0.68'
                    justify='"END"'/>
              </Text>
            </Shape>
          </Transform>
          <Transform DEF='numParticlesText'
              translation='1.6905 -0.955496 -1'
              scale='0.0672307 0.0672307 0.0672307'>
            <Shape>
              <Appearance>
                <Material/>
              </Appearance>
              <Text DEF='_5'
                  string='"numParticles 100"'
                  solid='true'>
                <FontStyle
                    family='"Ubuntu", "SANS"'
                    justify='"END"'/>
              </Text>
            </Shape>
          </Transform>
          <Transform DEF='numParticlesSlider'
              translation='0.0735 -0.9285 -3.51117e-06'
              center='0 -0.027 0'>
            <Transform DEF='IndexedLineSet'>
              <Shape>
                <Appearance>
                  <LineProperties
                      linewidthScaleFactor='2'/>
                  <Material DEF='Artdeco31_1'
                      emissiveColor='0.721 0.721 0.721'/>
                </Appearance>
                <IndexedLineSet
                    colorPerVertex='false'
                    coordIndex='0, 1, -1'>
                  <Coordinate
                      point='0 0 0, 1 0 0'/>
                </IndexedLineSet>
              </Shape>
            </Transform>
            <Transform>
              <Transform DEF='Rectangle2D'
                  translation='0.184767 0 0'
                  scale='0.027 0.0267372 0.0267372'>
                <Shape>
                  <Appearance>
                    <Material/>
                  </Appearance>
                  <Disk2D/>
                </Shape>
              </Transform>
              <PlaneSensor DEF='_6'
                  offset='0.184767 0 0'
                  maxPosition='1 0'/>
            </Transform>
            <Script DEF='numParticlesScript'>
              <field accessType='inputOnly' type='SFVec3f' name='set_translation'/>
              <field accessType='inputOutput' type='SFString' name='text' value='numParticles'/>
              <field accessType='inputOutput' type='SFInt32' name='minValue' value='10'/>
              <field accessType='inputOutput' type='SFInt32' name='maxValue' value='500'/>
              <field accessType='outputOnly' type='SFInt32' name='value_changed'/>
              <field accessType='outputOnly' type='MFString' name='string_changed'/>
              <field accessType='initializeOnly' type='SFInt32' name='currentValue' value='100'/>
<![CDATA[ecmascript:

function initialized ()
{
	set_value (value);
}

function set_translation (value)
{
	set_value (minValue + (value .x * (maxValue - minValue)));
}

function set_value (value)
{
	currentValue   = value;
	string_changed = new MFString (text + " " + currentValue);
	value_changed  = value;
}]]> 
            </Script>
          </Transform>
          <Transform DEF='pointSizeText'
              translation='1.6905 -0.857496 -1'
              scale='0.0672307 0.0672307 0.0672307'>
            <Shape>
              <Appearance>
                <Material/>
              </Appearance>
              <Text DEF='_7'
                  string='"pointSize 20"'
                  solid='true'>
                <FontStyle
                    family='"Ubuntu", "SANS"'
                    justify='"END"'/>
              </Text>
            </Shape>
          </Transform>
          <Transform DEF='pointSizeSlider'
              translation='0.2205 -0.8305 -3.15105e-06'
              center='0 -0.027 0'>
            <Transform DEF='IndexedLineSet_1'>
              <Shape>
                <Appearance>
                  <LineProperties
                      linewidthScaleFactor='2'/>
                  <Material DEF='Artdeco31_2'
                      emissiveColor='0.721 0.721 0.721'/>
                </Appearance>
                <IndexedLineSet
                    colorPerVertex='false'
                    coordIndex='0, 1, -1'>
                  <Coordinate
                      point='0 0 0, 1 0 0'/>
                </IndexedLineSet>
              </Shape>
            </Transform>
            <Transform>
              <Transform DEF='Rectangle2D_1'
                  translation='0.398908 0 0'
                  scale='0.027 0.0267372 0.0267372'>
                <Shape>
                  <Appearance>
                    <Material/>
                  </Appearance>
                  <Disk2D/>
                </Shape>
              </Transform>
              <PlaneSensor DEF='_8'
                  offset='0.398908 0 0'
                  maxPosition='1 0'/>
            </Transform>
            <Script DEF='pointSizeScript'>
              <field accessType='inputOnly' type='SFVec3f' name='set_translation'/>
              <field accessType='inputOutput' type='SFString' name='text' value='pointSize'/>
              <field accessType='inputOutput' type='SFFloat' name='minValue' value='1'/>
              <field accessType='inputOutput' type='SFFloat' name='maxValue' value='50'/>
              <field accessType='outputOnly' type='SFFloat' name='value_changed'/>
              <field accessType='outputOnly' type='MFString' name='string_changed'/>
              <field accessType='initializeOnly' type='SFInt32' name='currentValue' value='20'/>
<![CDATA[ecmascript:

function initialized ()
{
	set_value (value);
}

function set_translation (value)
{
	set_value (minValue + (value .x * (maxValue - minValue)));
}

function set_value (value)
{
	currentValue   = value;
	string_changed = new MFString (text + " " + currentValue);
	value_changed  = value;
}]]> 
            </Script>
          </Transform>
        </Group>
      </Layer>
    </LayerSet>
    <ROUTE fromNode='_4' fromField='time' toNode='BubblesScript' toField='set_time'/>
    <ROUTE fromNode='_6' fromField='translation_changed' toNode='Rectangle2D' toField='set_translation'/>
    <ROUTE fromNode='_6' fromField='translation_changed' toNode='numParticlesScript' toField='set_translation'/>
    <ROUTE fromNode='numParticlesScript' fromField='string_changed' toNode='_5' toField='set_string'/>
    <ROUTE fromNode='numParticlesScript' fromField='value_changed' toNode='BubblesScript' toField='set_numParticles'/>
    <ROUTE fromNode='_8' fromField='translation_changed' toNode='Rectangle2D_1' toField='set_translation'/>
    <ROUTE fromNode='_8' fromField='translation_changed' toNode='pointSizeScript' toField='set_translation'/>
    <ROUTE fromNode='pointSizeScript' fromField='string_changed' toNode='_7' toField='set_string'/>
    <ROUTE fromNode='pointSizeScript' fromField='value_changed' toNode='_1' toField='set_linewidthScaleFactor'/>
  </Scene>
</X3D>
